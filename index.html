<!DOCTYPE html>
<html>

<head>
    <title>MasterMenu</title>
    <meta name="viewport" content="initial-scale=1.0">
    <meta charset="utf-8">
    <link rel="stylesheet" href="./css/style.css">
    <link rel="stylesheet" href="./css/placesapi.css">
    <link href="https://fonts.googleapis.com/css2?family=Open+Sans&family=Quicksand:wght@700&display=swap"
        rel="stylesheet">
</head>

<!-- Sidebar script-->
<script>
    /* Set the width of the sidebar to 250px and the left margin of the page content to 250px */
    function openNav() {
        document.getElementById("mySidebar").style.width = "200px";
        document.getElementById("main").style.marginLeft = "200px";
    }

    /* Set the width of the sidebar to 0 and the left margin of the page content to 0 */
    function closeNav() {
        document.getElementById("mySidebar").style.width = "0";
        document.getElementById("main").style.marginLeft = "0";
    }

</script>

<body>
    <!-- Sidebar -->
    <div id="mySidebar" class="sidebar">
        <a href="javascript:void(0)" class="closebtn" onclick="closeNav()">&times;</a>
        <a href="./login.html">
            <h2>Login</h2>
        </a>
        <a href="./register.html">
            <h2>Register</h2>
        </a>
        <a href="./business.html">
            <h2>Business</h2>
        </a>
        <a href="./contacts.html">
            <h2>Contacts</h2>
        </a>
    </div>

    <div class="content" id="main">
        <button class="openbtn" onclick="openNav()">&#9776;</button>

        <!-- api key: AIzaSyB4jOH2aIzJ2hevgJsniX-OgYWRrHscslQ-->
        <div>

            <h1><a href="./index.html" style="color:white;text-decoration:none;">MasterMenu</a></h1>

            <!-- google places autocomplete -->

            <div id="locationField">
                <input class="inputbox" id="autocomplete" placeholder="Enter your address" onFocus="geolocate()"
                    type="text" />

            </div>

            <div id="map"></div>


        </div>
        <script>

            var placeSearch, autocomplete;

            var componentForm = {
                street_number: 'short_name',
                route: 'long_name',
                locality: 'long_name',
                administrative_area_level_1: 'short_name',
                country: 'long_name',
                postal_code: 'short_name'
            };

            function initAutocomplete() {
                // Create the autocomplete object, restricting the search predictions to
                // geographical location types.
                autocomplete = new google.maps.places.Autocomplete(
                    document.getElementById('autocomplete'), { types: ['geocode'] });

                // Avoid paying for data that you don't need by restricting the set of
                // place fields that are returned to just the address components.
                autocomplete.setFields(['address_component']);

                // When the user selects an address from the drop-down, populate the
                // address fields in the form.
                autocomplete.addListener('place_changed', fillInAddress);
            }

            function fillInAddress() {
                // Get the place details from the autocomplete object.
                var place = autocomplete.getPlace();

                for (var component in componentForm) {
                    document.getElementById(component).value = '';
                    document.getElementById(component).disabled = false;
                }

                // Get each component of the address from the place details,
                // and then fill-in the corresponding field on the form. (can use this later for the map)
                for (var i = 0; i < place.address_components.length; i++) {
                    var addressType = place.address_components[i].types[0];
                    if (componentForm[addressType]) {
                        var val = place.address_components[i][componentForm[addressType]];
                        document.getElementById(addressType).value = val;
                    }
                }
            }

            // Bias the autocomplete object to the user's geographical location,
            // as supplied by the browser's 'navigator.geolocation' object.
            function geolocate() {
                if (navigator.geolocation) {
                    navigator.geolocation.getCurrentPosition(function (position) {
                        var geolocation = {
                            lat: position.coords.latitude,
                            lng: position.coords.longitude
                        };
                        var circle = new google.maps.Circle(
                            { center: geolocation, radius: position.coords.accuracy });
                        autocomplete.setBounds(circle.getBounds());
                    });
                }
            }
        </script>

        <script>
            var map;
            function initMap() {
                map = new google.maps.Map(document.getElementById('map'), {
                    center: { lat: -34.397, lng: 150.644 },
                    zoom: 8
                });
            }
        </script>
        <script
            src="https://maps.googleapis.com/maps/api/js?key=AIzaSyB4jOH2aIzJ2hevgJsniX-OgYWRrHscslQ&libraries=places&callback=initAutocomplete"
            async defer></script>
        <script async defer
            src="https://maps.googleapis.com/maps/api/js?key=AIzaSyB4jOH2aIzJ2hevgJsniX-OgYWRrHscslQ&callback=initMap">
        </script>

    </div>

</body>

</html>